/*-------------------------------------------------------
      S1D15E06 驱动 by wowbanui 2011

---------------------------------------------------------*/

#include "S1D15E06.h"
#include "LCD_FONT.h"
#include "gps.h"
#include "W25Q16.h"
#include <stdio.h>

#define LCD_RST_L() (GPIOC->BRR = GPIO_Pin_11)    //0 RESET
#define LCD_RST_H() (GPIOC->BSRR = GPIO_Pin_11)   //1 SET
#define LCD_CS_L()  (GPIOC->BRR = GPIO_Pin_12)    //0 RESET
#define LCD_CS_H()  (GPIOC->BSRR = GPIO_Pin_12)   //1 SET
#define LCD_A0_L()  (GPIOC->BRR = GPIO_Pin_10)    //0 RESET
#define LCD_A0_H()  (GPIOC->BSRR = GPIO_Pin_10)   //1 SET
#define LCD_RW_W()  (GPIOC->BRR = GPIO_Pin_9)    //0 RESET
#define LCD_RW_R()  (GPIOC->BSRR = GPIO_Pin_9)   //1 SET
#define LCD_E_L()   (GPIOC->BRR = GPIO_Pin_8)    //0 RESET
#define LCD_E_H()   (GPIOC->BSRR = GPIO_Pin_8)   //1 SET

static u8 CharLocX=0,CharLocPage=0;
static u8 GreyText= GRAY_BLACK,GreyBack= GRAY_WHITE;


void LCD_IO_Config(void)
{
    GPIO_InitTypeDef GPIO_InitStructure;
    GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
    GPIO_InitStructure.GPIO_Mode =  GPIO_Mode_Out_PP;

    //LCD
    LCD_RST_L();
    LCD_CS_L();
    GPIO_InitStructure.GPIO_Pin =   GPIO_Pin_0|GPIO_Pin_1|GPIO_Pin_2|GPIO_Pin_3|GPIO_Pin_4|GPIO_Pin_5|GPIO_Pin_6|GPIO_Pin_7|
                                    //PC.0-7(D0-D7)
                                    GPIO_Pin_8|GPIO_Pin_9|GPIO_Pin_10|GPIO_Pin_11|GPIO_Pin_12;
                                    //PC.8(E),PC.9(RW),PC.10(A0),PC.12(RST#),PC.13(CS#)
    GPIO_Init(GPIOC, &GPIO_InitStructure);
}

void LCD_CMD(u8 ucCMD)
{
 //   LCD_CS_L(); 
    LCD_A0_L();
    LCD_RW_W();
    LCD_E_H();
    GPIOC->BSRR = 0x00FF0000|ucCMD;
    LCD_E_L();
//    LCD_CS_H();    
}

void LCD_DAT(u8 ucDAT)
{
 //   LCD_CS_L();
    LCD_A0_H();
    LCD_RW_W();
    LCD_E_H();
    GPIOC->BSRR = 0x00FF0000|ucDAT;
    LCD_E_L();
 //   LCD_CS_H();    
}

void LCD_Init(void)                     // LCD 初始化
{
    LCD_RST_L();
    DelayUS(10);
    LCD_RST_H();

    LCD_CS_L();
    LCD_CMD(CMD_COLUM_ADDR_REVERSE);    // 12
    LCD_CMD(CMD_DATA_IN_DIR_PAGE);      // 11
    LCD_CMD(CMD_COM_OUTPUT_REVERSE);    // 5
    LCD_CMD(CMD_DISPLAY_NORMAL);        // 3
    LCD_CMD(CMD_DISPLAY_ALL_OFF);       // 4
    LCD_CMD(CMD_SET_DUTY);              // 18
    LCD_DAT(0x18);                      // 1/100
    LCD_DAT(0x04);
    LCD_CMD(CMD_DISPLAY_OFF_VC);        // 2
    LCD_CMD(CMD_CRYSTAL_VOL);           // 27
    LCD_DAT(0x03);
    LCD_CMD(CMD_SET_ELECTRONIC);        // 28
    LCD_DAT(0x33);
    LCD_CMD(CMD_TEMP_GRAD_SEL);         // 31
    LCD_DAT(0x04);
    LCD_CMD(CMD_SET_LINE_INVERSION);    // 13
    LCD_CMD(CMD_LINE_INVERSION_ON);     // 14
    LCD_CMD(CMD_SET_BUILT_IN_OSC_F);    // 24
    LCD_DAT(0x00);
    LCD_CMD(CMD_BUILT_IN_OSC_ON);       // 23
    LCD_CMD(CMD_SET_GRAY_PATTERN);      // 16
    LCD_DAT(0x43);
    LCD_CMD(CMD_DISPLAY_MODE);          // 15
    LCD_DAT(DAT_DISPLAY_MODE_4GRAY);  
    LCD_CMD(CMD_SET_PARTIAL_DISPLAY);   // 20
    LCD_DAT(0x00);
    LCD_DAT(0xFF);
    LCD_CMD(CMD_POWER_CONTROL);         // 25
    LCD_DAT(0x17);
    LCD_CMD(CMD_DISPLAY_ON);
}

void LCD_Clear(void)                    // 清空屏幕
{
    u16 i;

    LCD_CMD(CMD_DATA_IN_DIR_COLUMN);
    LCD_CMD(CMD_SET_START_LINE);
    LCD_DAT(0);
    LCD_CMD(CMD_SET_COLUMN_ADDR);
    LCD_DAT(0);
    LCD_CMD(CMD_SET_PAGE_ADDR);
    LCD_DAT(0);
    LCD_CMD(CMD_DATA_WRITE);

    for(i=0;i<4000;i++)
    {
       LCD_DAT(0x00);
    }

    LCD_CMD(CMD_SET_START_LINE);
    LCD_DAT(0);
    LCD_CMD(CMD_SET_COLUMN_ADDR);
    LCD_DAT(0);
    LCD_CMD(CMD_SET_PAGE_ADDR);
    LCD_DAT(0);
    LCD_CMD(CMD_DATA_IN_DIR_PAGE);
}

void LCD_FillBase00(void)               // 清空屏幕上部 10 Pages(时间+经纬度) 的空间
{
    u16 i;

    LCD_CMD(CMD_DATA_IN_DIR_COLUMN);
    LCD_CMD(CMD_SET_COLUMN_ADDR);
    LCD_DAT(0);
    LCD_CMD(CMD_SET_PAGE_ADDR);
    LCD_DAT(0);
    LCD_CMD(CMD_DATA_WRITE);

    for(i=0;i<1600;i++)
    {
       LCD_DAT(0x00);
    }

    LCD_CMD(CMD_DATA_IN_DIR_PAGE);
}


void LCD_SetPos(u8 ucX, u8 ucPage)      // 
{
    CharLocX=ucX;
    CharLocPage=ucPage;
}

void LCD_SetGray(u8 ucText, u8 ucBack)  // 设置灰度 (前景,背景)
{
    GreyText= ucText;
    GreyBack= ucBack;
}


void LCD_PutChar05(char ucDAT)          // 输出 05 (英文)字符 
{  
    u8 i,k;
    u8 CharBuf;
    u16 CharBufG;

    if ((CharLocX+3)>159)               //是否超出屏幕
    {
        CharLocX=0;
        CharLocPage+=2;
        if (CharLocPage>23) CharLocPage=0;
    }

    for (i=0;i<4;i++)                   //开始显示字符
    {
        LCD_CMD(CMD_SET_COLUMN_ADDR);   //设置显示位置
        LCD_DAT(CharLocX+i);
        LCD_CMD(CMD_SET_PAGE_ADDR);
        LCD_DAT(CharLocPage);
        LCD_CMD(CMD_DATA_WRITE);        //开始填充数据

        CharBuf=ASCII_3x5[ucDAT][i];    //字模位置
        CharBufG=0x0000;
        for (k=0;k<8;k++)
        {
            CharBufG<<=2;
            if ((CharBuf&0x01)==0x01)
                CharBufG|=GreyText;
            else
                CharBufG|=GreyBack;
            CharBuf>>=1;      
        }
        LCD_DAT(CharBufG);
        LCD_DAT(CharBufG>>8);
    }
    CharLocX+=4;
}


void LCD_PutChar08(char ucDAT)          // 输出 08 (英文)字符
{  
    u8 i,k;
    u8 CharBuf;
    u16 CharBufG;

    if ((CharLocX+4)>159)               //是否超出屏幕
    {
        CharLocX=0;
        CharLocPage+=2;
        if (CharLocPage>23) CharLocPage=0;
    }

    for (i=0;i<5;i++)                   //开始显示字符
    {
        LCD_CMD(CMD_SET_COLUMN_ADDR);   //设置显示位置
        LCD_DAT(CharLocX+i);
        LCD_CMD(CMD_SET_PAGE_ADDR);
        LCD_DAT(CharLocPage);
        LCD_CMD(CMD_DATA_WRITE);        //开始填充数据

        CharBuf=ASCII_4x7[ucDAT][i];    //字模位置
        CharBufG=0x0000;
        for (k=0;k<8;k++)
        {
            CharBufG<<=2;
            if ((CharBuf&0x01)==0x01)
                CharBufG|=GreyText;
            else
                CharBufG|=GreyBack;
            CharBuf>>=1;      
        }
        LCD_DAT(CharBufG);
        LCD_DAT(CharBufG>>8);
    }
    CharLocX+=5;
}


void LCD_PutChar12(char ucDAT)          // 输出 12 (英文)字符
{  
    u8 i,k;
    u8 CharBuf;
    u16 CharBufG;

    if ((CharLocX+5)>159)               //是否超出屏幕
    {
        CharLocX=0;
        CharLocPage+=3;
        if (CharLocPage>22) CharLocPage=0;
    }

    for (i=0;i<6;i++)                   //开始显示字符
    {
        LCD_CMD(CMD_SET_COLUMN_ADDR);   //设置显示位置
        LCD_DAT(CharLocX+i);
        LCD_CMD(CMD_SET_PAGE_ADDR);
        LCD_DAT(CharLocPage);
        LCD_CMD(CMD_DATA_WRITE);        //开始填充数据

        CharBuf=Font12[ucDAT][i][0];    //字模位置
        CharBufG=0x0000;
        for (k=0;k<8;k++)
        {
            CharBufG<<=2;
            if ((CharBuf&0x01)==0x01)
                CharBufG|=GreyText;
            else
                CharBufG|=GreyBack;
            CharBuf>>=1;      
        }
        LCD_DAT(CharBufG);
        LCD_DAT(CharBufG>>8);
        //---------------------------
        CharBuf=Font12[ucDAT][i][1]>>4; //字模位置
        CharBufG=0x0000;
        for (k=0;k<4;k++)
        {
            CharBufG<<=2;
            if ((CharBuf&0x01)==0x01)
                CharBufG|=GreyText;
            else
                CharBufG|=GreyBack;
            CharBuf>>=1;      
        }
        LCD_DAT(CharBufG);
    }
    CharLocX+=6;
}

void LCD_PutHz12(u16 Hz)                // 输出 12*12 (汉字)字符
{
    u8 i;
    s8 sj;
    u32 CharBufG;
    u8 CharBuff[24];

    if ((CharLocX+11)>159)              //是否超出屏幕
    {
        CharLocX=0;
        CharLocPage+=3;
        if (CharLocPage>22) CharLocPage=0;
    }

    W25Q_ReadMultiBytes(CharBuff,Hz*24+0x40000,24);

    for (i=0;i<8;i++)                   //开始显示字符
    {
        LCD_CMD(CMD_SET_COLUMN_ADDR);   //设置显示位置
        LCD_DAT(CharLocX+i);
        LCD_CMD(CMD_SET_PAGE_ADDR);
        LCD_DAT(CharLocPage);
        LCD_CMD(CMD_DATA_WRITE);        //开始填充数据

        CharBufG=0x00000000;
        for (sj=22;sj>=0;sj-=2)         //开始显示字符
        {
            CharBufG<<=2;
            if ((CharBuff[sj]&0x80)==0x80)
                CharBufG|=GreyText;
            else
                CharBufG|=GreyBack;
            CharBuff[sj]<<=1;
        }
        LCD_DAT(CharBufG);
        LCD_DAT(CharBufG>>8);
        LCD_DAT(CharBufG>>16);
    }

    for (i=8;i<12;i++)                  //开始显示字符
    {
        LCD_CMD(CMD_SET_COLUMN_ADDR);   //设置显示位置
        LCD_DAT(CharLocX+i);
        LCD_CMD(CMD_SET_PAGE_ADDR);
        LCD_DAT(CharLocPage);
        LCD_CMD(CMD_DATA_WRITE);        //开始填充数据

        CharBufG=0x00000000;
        for (sj=23;sj>0;sj-=2)          //开始显示字符
        {
            CharBufG<<=2;
            if ((CharBuff[sj]&0x80)==0x80)
                CharBufG|=GreyText;
            else
                CharBufG|=GreyBack;
            CharBuff[sj]<<=1;
        }
        LCD_DAT(CharBufG);
        LCD_DAT(CharBufG>>8);
        LCD_DAT(CharBufG>>16);

    }
    CharLocX+=12;
}

void LCD_PutChar16(char ucDAT)          // 输出 16 (英文)字符
{  
    u8 i,j,k;
    u8 CharBuf;
    u16 CharBufG;

    if ((CharLocX+7)>159)               //是否超出屏幕
    {
        CharLocX=0;
        CharLocPage+=4;
        if (CharLocPage>21) CharLocPage=0;
    }

    for (i=0;i<8;i++)                   //开始显示字符
    {
        LCD_CMD(CMD_SET_COLUMN_ADDR);   //设置显示位置
        LCD_DAT(CharLocX+i);
        LCD_CMD(CMD_SET_PAGE_ADDR);
        LCD_DAT(CharLocPage);
        LCD_CMD(CMD_DATA_WRITE);        //开始填充数据

        for (j=0;j<2;j++)               //开始显示字符
        {
            CharBuf=Font16[ucDAT][i][j];//字模位置
            CharBufG=0x0000;
            for (k=0;k<8;k++)
            {
                CharBufG<<=2;
                if ((CharBuf&0x01)==0x01)
                    CharBufG|=GreyText;
                else
                    CharBufG|=GreyBack;
                CharBuf>>=1;      
            }
            LCD_DAT(CharBufG);
            LCD_DAT(CharBufG>>8);
        }
    }
    CharLocX+=8;
}


void LCD_PutHz16(u16 Hz)                // 输出 16*16 (汉字)字符
{
    u8 i;
    s8 sj;
    u32 CharBufG;
    u8 CharBuff[32];

    if ((CharLocX+15)>159)              //是否超出屏幕
    {
        CharLocX=0;
        CharLocPage+=4;
        if (CharLocPage>21) CharLocPage=0;
    }

    W25Q_ReadMultiBytes(CharBuff,Hz*32,32);

    for (i=0;i<8;i++)                   //开始显示字符
    {
        LCD_CMD(CMD_SET_COLUMN_ADDR);   //设置显示位置
        LCD_DAT(CharLocX+i);
        LCD_CMD(CMD_SET_PAGE_ADDR);
        LCD_DAT(CharLocPage);
        LCD_CMD(CMD_DATA_WRITE);        //开始填充数据

        CharBufG=0x00000000;
        for (sj=30;sj>=0;sj-=2)         //开始显示字符
        {
            CharBufG<<=2;
            if ((CharBuff[sj]&0x80)==0x80)
                CharBufG|=GreyText;
            else
                CharBufG|=GreyBack;
            CharBuff[sj]<<=1;
        }
        LCD_DAT(CharBufG);
        LCD_DAT(CharBufG>>8);
        LCD_DAT(CharBufG>>16);
        LCD_DAT(CharBufG>>24);
    }

    for (i=8;i<16;i++)                  //开始显示字符
    {
        LCD_CMD(CMD_SET_COLUMN_ADDR);   //设置显示位置
        LCD_DAT(CharLocX+i);
        LCD_CMD(CMD_SET_PAGE_ADDR);
        LCD_DAT(CharLocPage);
        LCD_CMD(CMD_DATA_WRITE);        //开始填充数据

        CharBufG=0x00000000;
        for (sj=31;sj>0;sj-=2)          //开始显示字符
        {
            CharBufG<<=2;
            if ((CharBuff[sj]&0x80)==0x80)
                CharBufG|=GreyText;
            else
                CharBufG|=GreyBack;
            CharBuff[sj]<<=1;
        }
        LCD_DAT(CharBufG);
        LCD_DAT(CharBufG>>8);
        LCD_DAT(CharBufG>>16);
        LCD_DAT(CharBufG>>24);
    }

    CharLocX+=16;
}

void LCD_PutStr16(u8 ucX, u8 ucY, char* cStr)   // 输出 16 字符串 (中英混合)
{
    u8 Hz1=0x00,Hz2=0x00;
    u16 HzLocate=0x0000;

    CharLocX=ucX;
    CharLocPage=ucY;

    while(*cStr)
    {
        if (*cStr>0xA0)                 //中文
        {
            Hz1= *cStr - 0xA0;
            cStr++;
            if (*cStr==0) return;
            Hz2= *cStr - 0xA0;
            cStr++;
            HzLocate= (Hz1-1)*94+Hz2-1;
            LCD_PutHz16(HzLocate);
        }
        else                            //ASCII
        {
            switch(*cStr)
            {
                case '\r':
                    CharLocX=0;
                    break;
                case '\n':
                    CharLocPage+=4;
                    if (CharLocPage>21) CharLocPage=0;
                    break;
                default:
                    LCD_PutChar16(*cStr);
                    break;          
            }
            cStr++;
        }
    }
}

void LCD_PutStr12(u8 ucX, u8 ucY, char* cStr)   // 输出 12 字符串 (中英混合)
{
    u8 Hz1=0x00,Hz2=0x00;
    u16 HzLocate=0x0000;

    CharLocX=ucX;
    CharLocPage=ucY;

    while(*cStr)
    {
        if (*cStr>0xA0)                 //中文
        {
            Hz1= *cStr - 0xA0;
            cStr++;
            if (*cStr==0) return;
            Hz2= *cStr - 0xA0;
            cStr++;
            HzLocate= (Hz1-1)*94+Hz2-1;
            LCD_PutHz12(HzLocate);
        }
        else                            //ASCII
        {
            switch(*cStr)
            {
                case '\r':
                    CharLocX=0;
                    break;
                case '\n':
                    CharLocPage+=3;
                    if (CharLocPage>22) CharLocPage=0;
                    break;
                default:
                    LCD_PutChar12(*cStr);
                    break;          
            }
            cStr++;
        }
    }
}

void LCD_PutStr08(u8 ucX, u8 ucY, char* cStr)   // 输出 08 字符串 (仅英文)
{
    CharLocX=ucX;
    CharLocPage=ucY;

    while(*cStr)
    {
        switch(*cStr)
        {
            case '\r':
                CharLocX=0;
                break;
            case '\n':
                CharLocPage+=2;
                if (CharLocPage>23) CharLocPage=0;
                break;
            default:
                LCD_PutChar08(*cStr);
                break;          
        }
        cStr++;
    }
}

void LCD_PutStr05(u8 ucX, u8 ucY, char* cStr)   // 输出 05 字符串 (仅部分英文)
{
    CharLocX=ucX;
    CharLocPage=ucY;

    while(*cStr)
    {
        switch(*cStr)
        {
            case '\r':
                CharLocX=0;
                break;
            case '\n':
                CharLocPage+=2;
                if (CharLocPage>23) CharLocPage=0;
                break;
            default:
                LCD_PutChar05(*cStr);
                break;          
        }
        cStr++;
    }
}

/*---------------------------------------------
| void LCD_GPS_SNR(u8 ID, u8 ucSNR, u8 SatUsed)
| 显示信号强度 1组
| ID: 卫星编号
| ucSNR: 信号强度
| SatUsed : 卫星使用标志
---------------------------------------------*/
void LCD_GPS_SNR(u8 ucX, u8 ucY, u8 ID, u8 ucSNR, u8 SatUsed)
{
    u8 SNRBuf[7][6];    //5->6增加一组 第6组防止数组越界,另外用于SatID
    u8 SNRD=(ucSNR/3)/8;
    u8 SNRR=(ucSNR/3)%8;
    u8 SNR_T;
    u16 SNR_G;
    u8 i,j,k;
    u8 GrayF,GrayB;

    if (SatUsed)
    {
        GrayF=0x03;
        GrayB=0x01;
    }
    else
    {
        GrayF=0x02;
        GrayB=0x01;
    }

    //------------------------------
    //PAGE 11,12             21,22           23,24(Max): SatID
    //[7 -- <5> -- 0]  ...  [7 -- <0> -- 0]
    //  96%         80%...               0%

    //绘制柱状图到显存
    //SNRD:数值到那一段?
    //SNRR:数值超过当前段多少?
    for (i=0;i<5;i++)
    {
        if (i>SNRD)         //超过了数值所在段, 则为空白
            SNRBuf[0][i]=0x00;
        else if (i==SNRD)   //位于数值所在段, 则余数等于高度
            SNRBuf[0][i]=(0xFF)>>(8-SNRR);
        else                //低于数值所在段, 全黑
            SNRBuf[0][i]=0xFF;
    }
    //复制到整个柱图
    for (i=1;i<7;i++)
    {
        for (j=0;j<5;j++)
        {
            SNRBuf[i][j]=SNRBuf[0][j];
        }
    }

 /*   //添加最上方的虚线(图表上外框)
    for (i=0;i<7;i+=2)
    {
        SNRBuf[i][4]|=0x80;
    }*/

    //绘制数值到显存
    if (ucSNR<10)           //只有一位, 居中
    {
        if (ucSNR>0)        //只显示大于0的数值
        {
            for (j=0;j<3;j++)
            {
                SNR_T=ASCII_3x5[(ucSNR+'0')][j];
                SNRBuf[j+2][SNRD]|=(SNR_T<<SNRR);
                SNRBuf[j+2][SNRD+1]|=(SNR_T>>(8-SNRR));
            }
        }
    }
    else
    {
        i= ucSNR/10; //十位数
        for (j=0;j<3;j++)
        {
            SNR_T=ASCII_3x5[(i+'0')][j];
            SNRBuf[j][SNRD]|=(SNR_T<<SNRR);
            SNRBuf[j][SNRD+1]|=(SNR_T>>(8-SNRR));
        }
    
        i= ucSNR%10; //个位数
        for (j=0;j<3;j++)
        {
            SNR_T=ASCII_3x5[(i+'0')][j];
            SNRBuf[j+4][SNRD]|=(SNR_T<<SNRR);
            SNRBuf[j+4][SNRD+1]|=(SNR_T>>(8-SNRR));
        }
    }

    //绘制SatID到显存
    if((ID>0)&&(ID<100))
    {
        i= ID/10; //十位数
        for (j=0;j<3;j++)
        {
            SNRBuf[j][5]=ASCII_3x5[(i+'0')][j];
        }
        i= ID%10; //个位数
        for (j=0;j<3;j++)
        {
            SNRBuf[j+4][5]=ASCII_3x5[(i+'0')][j];
        }
        SNRBuf[3][5]=0x00;
    }
    else
    {
        for (j=0;j<3;j++)
        {
            SNRBuf[j][5]=0x08;
            SNRBuf[j+4][5]=0x08;
        }
        SNRBuf[3][5]=0x00;   
    }

    //绘制到LCD
    for (i=0;i<7;i++)
    {
        LCD_CMD(CMD_SET_COLUMN_ADDR);
        LCD_DAT(ucX+i);
        LCD_CMD(CMD_SET_PAGE_ADDR);
        LCD_DAT(ucY);
        LCD_CMD(CMD_DATA_WRITE);
        for (j=1;j<5;j++)   //强度高20%不显示
        {
            SNR_T=SNRBuf[i][4-j];
            SNR_G=0x0000;
            for (k=0;k<8;k++)
            {
                SNR_G<<=2;
                if ((SNR_T&0x01)==0x01)
                    SNR_G|=GrayF;
                else
                    SNR_G|=GrayB;
                SNR_T>>=1;      
            }
            LCD_DAT(SNR_G);
            LCD_DAT(SNR_G>>8);  
        }

        {//绘制SatID
            SNR_T=SNRBuf[i][5]|0x80;
            SNR_G=0x0000;
            for (k=0;k<8;k++)
            {
                SNR_G<<=2;
                if ((SNR_T&0x01)==0x01)
                    SNR_G|=0x03;
                else
                    SNR_G|=0x01;
                SNR_T>>=1;      
            }
            LCD_DAT(SNR_G);
            LCD_DAT(SNR_G>>8);  
        }
    }   
}

// 卫星信息 - 卫星分布图 背景图形数据, 4灰度, 60 Pixel x 60 Pixel
// 取模方式: 由上至下垂直扫描 15 字节, 由左至右 60 列
// 对应显示方式: Page 自增方式 
const unsigned char SatInfoBackground[60][15] = {   
    0x00,0x00,0x5B,0x55,0x55,0x55,0x55,0x55,0x55,0x55,0x55,0x55,0x55,0x55,0x55, 0x00,0x00,0x5B,0x55,0x55,0x55,0x55,0x55,0x55,0x55,0x55,0x55,0x55,0x55,0x55, 0x00,0x00,0x5B,0x55,0x55,0x55,0xF5,0xFF,0x5F,0x55,0x55,0x55,0x55,0x55,0x55, 0x00,0x00,0x5B,0x55,0x55,0xF5,0x3F,0x30,0xFC,0x5F,0x55,0x55,0x55,0x55,0x55,
    0x00,0x00,0x5B,0x55,0xD5,0x0F,0x00,0x30,0x00,0xF0,0x57,0x55,0x55,0x55,0x55, 0x00,0x00,0x5B,0x55,0x3D,0x00,0x00,0x30,0x00,0x00,0x7C,0x55,0x55,0x55,0x55, 0x00,0x00,0x5B,0xD5,0x03,0x00,0x00,0x30,0x00,0x00,0xC0,0x57,0x55,0x55,0x55, 0x00,0x00,0x5B,0x35,0x00,0x00,0x00,0x30,0x00,0x00,0x00,0x5F,0x55,0x55,0x55,
    0x00,0x00,0x5B,0x0F,0x00,0x00,0x00,0x30,0x00,0x00,0x00,0xF0,0x55,0x55,0x55, 0x00,0x00,0xDB,0x03,0x00,0x00,0x00,0x30,0x00,0x00,0x00,0xC0,0x57,0x55,0x55, 0x00,0x00,0xFB,0x00,0x00,0x00,0x00,0x30,0x00,0x00,0x00,0x00,0x5F,0x55,0x55, 0x00,0x00,0x3F,0x00,0x00,0x00,0x00,0x30,0x00,0x00,0x00,0x00,0x7C,0x55,0x55,
    0x00,0x00,0x0F,0x00,0x00,0x00,0x00,0x30,0x00,0x00,0x00,0x00,0xF0,0x55,0x55, 0x00,0x00,0x03,0x00,0x00,0x00,0x00,0x30,0x00,0x00,0x00,0x00,0xC0,0x55,0x55, 0x00,0xC0,0x00,0x00,0x00,0x00,0x00,0x30,0x00,0x00,0x00,0x00,0x00,0x57,0x55, 0x00,0xF0,0x00,0x00,0x00,0x00,0xF0,0xFF,0x0F,0x00,0x00,0x00,0x00,0x5F,0x55,
    0x00,0x30,0x00,0x00,0x00,0xC0,0x3F,0x30,0xFC,0x03,0x00,0x00,0x00,0x5C,0x55, 0x00,0x0C,0x00,0x00,0x00,0xF0,0x00,0x30,0x00,0x0F,0x00,0x00,0x00,0x70,0x55, 0x00,0x0C,0x00,0x00,0x00,0x0F,0x00,0x30,0x00,0xF0,0x00,0x00,0x00,0x70,0x55, 0x00,0x03,0x00,0x00,0xC0,0x03,0x00,0x30,0x00,0xC0,0x03,0x00,0x00,0xC0,0x55,
    0x00,0x03,0x00,0x00,0xF0,0x00,0x00,0x30,0x00,0x00,0x0F,0x00,0x00,0xC0,0x55, 0x00,0x03,0x00,0x00,0x30,0x00,0x00,0x30,0x00,0x00,0x0C,0x00,0x00,0xC0,0x55, 0xC0,0x00,0x00,0x00,0x0C,0x00,0x00,0x30,0x00,0x00,0x30,0x00,0x00,0x00,0x57, 0xC0,0x00,0x00,0x00,0x0F,0x00,0x00,0x30,0x00,0x00,0xF0,0x00,0x00,0x00,0x57,
    0xC0,0x00,0x00,0x00,0x03,0x00,0x00,0x30,0x00,0x00,0xC0,0x00,0x00,0x00,0x57, 0xC0,0x00,0x00,0x00,0x03,0x00,0x00,0x30,0x00,0x00,0xC0,0x00,0x00,0x00,0x57, 0xF0,0x00,0x00,0xC0,0x03,0x00,0x00,0x30,0x00,0x00,0xC0,0x03,0x00,0x00,0x5F, 0xF0,0x3F,0x00,0xC0,0x00,0x00,0x00,0x30,0x00,0x00,0x00,0x03,0x00,0x00,0x5C,
    0x0C,0xC0,0x00,0xC0,0x00,0x00,0x00,0x30,0x00,0x00,0x00,0x03,0x00,0x00,0x5C, 0x3C,0xFF,0x00,0xC0,0x00,0x00,0x00,0x30,0x00,0x00,0x00,0x03,0x00,0x00,0x5C, 0xFC,0xFC,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x5F, 0xFC,0xF3,0x00,0xC0,0x00,0x00,0x00,0x30,0x00,0x00,0x00,0x03,0x00,0x00,0x5C,
    0x0C,0xC0,0x00,0xC0,0x00,0x00,0x00,0x30,0x00,0x00,0x00,0x03,0x00,0x00,0x5C, 0xF0,0x3F,0x00,0xC0,0x03,0x00,0x00,0x30,0x00,0x00,0xC0,0x03,0x00,0x00,0x5F, 0xC0,0x00,0x00,0x00,0x03,0x00,0x00,0x30,0x00,0x00,0xC0,0x00,0x00,0x00,0x57, 0xC0,0x00,0x00,0x00,0x03,0x00,0x00,0x30,0x00,0x00,0xC0,0x00,0x00,0x00,0x57,
    0xC0,0x00,0x00,0x00,0x0F,0x00,0x00,0x30,0x00,0x00,0xF0,0x00,0x00,0x00,0x57, 0xC0,0x00,0x00,0x00,0x0C,0x00,0x00,0x30,0x00,0x00,0x30,0x00,0x00,0x00,0x57, 0x00,0x03,0x00,0x00,0x30,0x00,0x00,0x30,0x00,0x00,0x0C,0x00,0x00,0xC0,0x55, 0x00,0x03,0x00,0x00,0xF0,0x00,0x00,0x30,0x00,0x00,0x0F,0x00,0x00,0xC0,0x55,
    0x00,0x03,0x00,0x00,0xC0,0x03,0x00,0x30,0x00,0xC0,0x03,0x00,0x00,0xC0,0x55, 0x00,0x0C,0x00,0x00,0x00,0x0F,0x00,0x30,0x00,0xF0,0x00,0x00,0x00,0x70,0x55, 0x00,0x0C,0x00,0x00,0x00,0xF0,0x00,0x30,0x00,0x0F,0x00,0x00,0x00,0x70,0x55, 0x00,0x30,0x00,0x00,0x00,0xC0,0x3F,0x30,0xFC,0x03,0x00,0x00,0x00,0x5C,0x55,
    0x00,0xF0,0x00,0x00,0x00,0x00,0xF0,0xFF,0x0F,0x00,0x00,0x00,0x00,0x5F,0x55, 0x00,0xC0,0x00,0x00,0x00,0x00,0x00,0x30,0x00,0x00,0x00,0x00,0x00,0x57,0x55, 0x00,0x00,0x03,0x00,0x00,0x00,0x00,0x30,0x00,0x00,0x00,0x00,0xC0,0x55,0x55, 0x00,0x00,0x0F,0x00,0x00,0x00,0x00,0x30,0x00,0x00,0x00,0x00,0xF0,0x55,0x55,
    0x00,0x00,0x3F,0x00,0x00,0x00,0x00,0x30,0x00,0x00,0x00,0x00,0x7C,0x55,0x55, 0x00,0x00,0xFB,0x00,0x00,0x00,0x00,0x30,0x00,0x00,0x00,0x00,0x5F,0x55,0x55, 0x00,0x00,0xDB,0x03,0x00,0x00,0x00,0x30,0x00,0x00,0x00,0xC0,0x57,0x55,0x55, 0x00,0x00,0x5B,0x0F,0x00,0x00,0x00,0x30,0x00,0x00,0x00,0xF0,0x55,0x55,0x55,
    0x00,0x00,0x5B,0xF5,0x00,0x00,0x00,0x30,0x00,0x00,0x00,0x5F,0x55,0x55,0x55, 0x00,0x00,0x5B,0xD5,0x03,0x00,0x00,0x30,0x00,0x00,0xC0,0x57,0x55,0x55,0x55, 0x00,0x00,0x5B,0x55,0x3D,0x00,0x00,0x30,0x00,0x00,0x7C,0x55,0x55,0x55,0x55, 0x00,0x00,0x5B,0x55,0xD5,0x0F,0x00,0x30,0x00,0xF0,0x57,0x55,0x55,0x55,0x55,
    0x00,0x00,0x5B,0x55,0x55,0xF5,0x3F,0x30,0xFC,0x5F,0x55,0x55,0x55,0x55,0x55, 0x00,0x00,0x5B,0x55,0x55,0x55,0xF5,0xFF,0x5F,0x55,0x55,0x55,0x55,0x55,0x55, 0x00,0x00,0x5B,0x55,0x55,0x55,0x55,0x55,0x55,0x55,0x55,0x55,0x55,0x55,0x55, 0x00,0x00,0x5B,0x55,0x55,0x55,0x55,0x55,0x55,0x55,0x55,0x55,0x55,0x55,0x55,
};

const float sincos[72][2]={
    //sin     cos     degree
     0.0000,  1.0000, //0
     0.0872,  0.9962, //5
     0.1736,  0.9848, //10
     0.2588,  0.9659, //15
     0.3420,  0.9397, //20
     0.4226,  0.9063, //25
     0.5000,  0.8660, //30
     0.5736,  0.8192, //35
     0.6428,  0.7660, //40
     0.7071,  0.7071, //45
     0.7660,  0.6428, //50
     0.8192,  0.5736, //55
     0.8660,  0.5000, //60
     0.9063,  0.4226, //65
     0.9397,  0.3420, //70
     0.9659,  0.2588, //75
     0.9848,  0.1736, //80
     0.9962,  0.0872, //85
     1.0000,  0.0000, //90
     0.9962, -0.0872, //95
     0.9848, -0.1736, //100
     0.9659, -0.2588, //105
     0.9397, -0.3420, //110
     0.9063, -0.4226, //115
     0.8660, -0.5000, //120
     0.8192, -0.5736, //125
     0.7660, -0.6428, //130
     0.7071, -0.7071, //135
     0.6428, -0.7660, //140
     0.5736, -0.8192, //145
     0.5000, -0.8660, //150
     0.4226, -0.9063, //155
     0.3420, -0.9397, //160
     0.2588, -0.9659, //165
     0.1736, -0.9848, //170
     0.0872, -0.9962, //175
     0.0000, -1.0000, //180
    -0.0872, -0.9962, //185
    -0.1736, -0.9848, //190
    -0.2588, -0.9659, //195
    -0.3420, -0.9397, //200
    -0.4226, -0.9063, //205
    -0.5000, -0.8660, //210
    -0.5736, -0.8192, //215
    -0.6428, -0.7660, //220
    -0.7071, -0.7071, //225
    -0.7660, -0.6428, //230
    -0.8192, -0.5736, //235
    -0.8660, -0.5000, //240
    -0.9063, -0.4226, //245
    -0.9397, -0.3420, //250
    -0.9659, -0.2588, //255
    -0.9848, -0.1736, //260
    -0.9962, -0.0872, //265
    -1.0000, -0.0000, //270
    -0.9962,  0.0872, //275
    -0.9848,  0.1736, //280
    -0.9659,  0.2588, //285
    -0.9397,  0.3420, //290
    -0.9063,  0.4226, //295
    -0.8660,  0.5000, //300
    -0.8192,  0.5736, //305
    -0.7660,  0.6428, //310
    -0.7071,  0.7071, //315
    -0.6428,  0.7660, //320
    -0.5736,  0.8192, //325
    -0.5000,  0.8660, //330
    -0.4226,  0.9063, //335
    -0.3420,  0.9397, //340
    -0.2588,  0.9659, //345
    -0.1736,  0.9848, //350
    -0.0872,  0.9962, //355
};

/*---------------------------------------------
| void LCD_GPS_SatInfo(struct_GPSGSV* pGSV, u8* SatUsed)
| 显示卫星信息 (仰角,方位角)
| *pGSV: 结构数据指针 GPS.h
| *SatUsed: 使用中的卫星编号
---------------------------------------------*/
void LCD_GPS_SatInfo(struct_GPSGSV* pGSV, u8* SatUsed)
{
    u8 SatInfoBuf[60][15];      //显存
    u8 SatIDNum,SatIDBufT;      //ID号数字, ID字模缓存
    u16 SatIDBufG;              //
    s8 SatInfoX,SatInfoY;       //卫星ID显示的坐标
    float SatInfoXd,SatInfoYd;  //计算坐标用到的浮点变量
    u8 SatInfoBack,SatInfoFront;//背景色, 前景色
    u8 i,j,k;

    //初始化显存, 将背景复制到显存中
    for (i=0;i<60;i++)
    {
        for(j=0;j<15;j++)
        {
            SatInfoBuf[i][j]=SatInfoBackground[i][j];           //<-SatInfoBackground[60][15] 背景 
         }
    }
    
    //绘制ID
    for (i=0;i<12;i++)  //处理12颗卫星
    {
        if ((pGSV->SatInfo[i].SatID)&&(pGSV->SatInfo[i].SNR))  //卫星ID不为零而且信号大于0
        {
            SatInfoX=30;    //初始居中
            SatInfoY=7;

            //根据方位角和仰角计算卫星在图形中的坐标
            SatInfoYd=SatInfoXd=90-(pGSV->SatInfo[i].Elevation);    //仰角->斜边长度(0-90)
            SatInfoXd*=sincos[(pGSV->SatInfo[i].Azimuth)/5][0];     //斜边*sin(方位角)=对边长度 (0-90)
            SatInfoXd=SatInfoXd/3;                                  //X轴坐标有效值24按比例缩小 90/30=3倍
            SatInfoX+=SatInfoXd;                                    //!!!浮点加到 unsigned char !!!

            SatInfoYd*=sincos[(pGSV->SatInfo[i].Azimuth)/5][1];     //斜边*cos(方位角)=邻边长度 (0-90)
            SatInfoYd=SatInfoYd/12;                                 //Y轴坐标有效值7.5 (去除ID半边4像素) 按比例缩小 90/7.5=12倍
            SatInfoY-=SatInfoYd;

            //数组边界检查
            if (SatInfoX>55) SatInfoX=55;
            if (SatInfoX<4) SatInfoX=4;
            if (SatInfoY>13) SatInfoY=13;
            if (SatInfoY<0) SatInfoY=0;

            //卫星号背景
            SatInfoBack=0xAA;   //背景初始为灰色 GRAY b10
            SatInfoFront=0x02;
            for (j=0;j<12;j++)  //卫星使用中则背景为改为黑色 GRAY b11
            {
                if ((pGSV->SatInfo[i].SatID)==(*(SatUsed+j)))
                {
                    SatInfoBack=0xFF;   
                    SatInfoFront=0x03;
                }
            }
            
            /*---------------------------------------------
                                         PAGE 0 SatInfoY
                    |　~~~~~~~　|
                    |~　　　~　　　~|
                    |~　~　~~~　~|
                    |~　~　~　　　~| PAGE 1 SatInfoY+1
                    |~　~　~　~~~|
                    |~　　　~　　　~|
                    |　~~~~~~~　|
                    +------------------+
                     ^       ^       ^
            SatInfoX-4   SatInfoX   SatInfoX+4
            ---------------------------------------------*/
            //由于有灰度像素, 不能直接将背景或运算到显存中, 必须先清空9*7
            //然后绘制背景到显存
            //左右两列去掉矩形四角的像素
            SatInfoBuf[SatInfoX-4][SatInfoY]&=0x0F;
            SatInfoBuf[SatInfoX-4][SatInfoY]|=SatInfoBack<<4;
            SatInfoBuf[SatInfoX-4][SatInfoY+1]&=0xC0;
            SatInfoBuf[SatInfoX-4][SatInfoY+1]|=SatInfoBack>>2;
            for (j=SatInfoX-3;j<SatInfoX+4;j++)
            {
                SatInfoBuf[j][SatInfoY]&=0x03;
                SatInfoBuf[j][SatInfoY]|=SatInfoBack<<2;
                SatInfoBuf[j][SatInfoY+1]=0x00;
                SatInfoBuf[j][SatInfoY+1]|=SatInfoBack;
            }
            SatInfoBuf[SatInfoX+4][SatInfoY]&=0x0F;
            SatInfoBuf[SatInfoX+4][SatInfoY]|=SatInfoBack<<4;
            SatInfoBuf[SatInfoX+4][SatInfoY+1]&=0xC0;
            SatInfoBuf[SatInfoX+4][SatInfoY+1]|=SatInfoBack>>2;

            //绘制卫星ID, 反白显示
            SatIDNum=(pGSV->SatInfo[i].SatID)/10+'0';           //十位数
            for (j=0;j<3;j++)
            {
                //将单色的字模扩展成 2bit/pixel 灰度数据   SatIDBufT(8bit)->SatIDBufG(16bit)
                SatIDBufT=ASCII_3x5[SatIDNum][j];
                SatIDBufG=0x0000;
                for (k=0;k<8;k++)
                {
                    SatIDBufG<<=2;
                    if ((SatIDBufT&0x01)==0x01)
                        SatIDBufG|=SatInfoFront;
                    else
                        SatIDBufG|=0x00;
                    SatIDBufT>>=1;      
                }
        
                //与或到显存中
                SatInfoBuf[SatInfoX-3+j][SatInfoY]^=SatIDBufG;
                SatInfoBuf[SatInfoX-3+j][SatInfoY+1]^=SatIDBufG>>8;
            }
            SatIDNum=(pGSV->SatInfo[i].SatID)%10+'0';           //个位数
            for (j=0;j<3;j++)
            {
                SatIDBufT=ASCII_3x5[SatIDNum][j];
                SatIDBufG=0x0000;
                for (k=0;k<8;k++)
                {
                    SatIDBufG<<=2;
                    if ((SatIDBufT&0x01)==0x01)
                        SatIDBufG|=SatInfoFront;
                    else
                        SatIDBufG|=0x00;
                    SatIDBufT>>=1;      
                }
                SatInfoBuf[SatInfoX+1+j][SatInfoY]^=SatIDBufG;
                SatInfoBuf[SatInfoX+1+j][SatInfoY+1]^=SatIDBufG>>8;
            }
        }
    }

    //绘制显存到LCD
    for (i=0;i<60;i++)
    {
        LCD_CMD(CMD_SET_COLUMN_ADDR);
        LCD_DAT(i+100);
        LCD_CMD(CMD_SET_PAGE_ADDR);
        LCD_DAT(10);
        LCD_CMD(CMD_DATA_WRITE);
        for (j=0;j<15;j++)
        {
            LCD_DAT(SatInfoBuf[i][j]);
        }
    }
}


//  保存图像 - 磁盘           
//  灰度 16x16 Pixel
const unsigned char IconSave[16][4] = {
    0x55,0x55,0x55,0x55,    0xFD,0xFF,0xFF,0x5F,    0xAD,0xAA,0xAA,0x7A,    0xFD,0xFF,0xAA,0x7A,    0x0D,0x00,0xFB,0x7F,    0x4D,0x04,0xFB,0x7F,    0x4D,0x04,0xFB,0x7F,    0x4D,0x04,0xFB,0x7F,
    0x4D,0x04,0xFB,0x7F,    0x4D,0x04,0xFB,0x7F,    0x4D,0x04,0x3B,0x70,    0x0D,0x00,0x3B,0x70,    0xFD,0xFF,0xFA,0x7F,    0xED,0xAA,0xAA,0x7A,    0xFD,0xFF,0xFF,0x7F,    0x55,0x55,0x55,0x55,
};

void LCD_IconSave(u8 ucX, u8 ucPage)
{
    u8 i,j;
    for (i=0;i<16;i++)
    {
        LCD_CMD(CMD_SET_COLUMN_ADDR);
        LCD_DAT(ucX+i);
        LCD_CMD(CMD_SET_PAGE_ADDR);
        LCD_DAT(ucPage);
        LCD_CMD(CMD_DATA_WRITE);

        for (j=0;j<4;j++)
        {
            LCD_DAT(IconSave[i][j]);     
        }
    }
}




const unsigned char IconDotData[]={     // 单色 8 Pixel 图标
    // 电池电量图标 16 Pixel
    16, 0x3C,0xFF,0x81,0x81,0x81,0x81,0x81,0x81,0x81,0x81,0x81,0x81,0x81,0x81,0x81,0xFF,    //电池 0%   ==> 0
    16, 0x3C,0xFF,0x81,0x81,0x81,0x81,0x81,0x81,0x81,0x81,0x81,0x81,0xBD,0xBD,0x81,0xFF,    //电池 25%  ==> 17
    16, 0x3C,0xFF,0x81,0x81,0x81,0x81,0x81,0x81,0x81,0xBD,0xBD,0x81,0xBD,0xBD,0x81,0xFF,    //电池 50%  ==> 34
    16, 0x3C,0xFF,0x81,0x81,0x81,0x81,0xBD,0xBD,0x81,0xBD,0xBD,0x81,0xBD,0xBD,0x81,0xFF,    //电池 75%  ==> 51
    16, 0x3C,0xFF,0x81,0xBD,0xBD,0x81,0xBD,0xBD,0x81,0xBD,0xBD,0x81,0xBD,0xBD,0x81,0xFF,    //电池 100% ==> 68
    // 定位方式指示图标 2D, 3D, G, DG, 14 Pixel
    14, 0x7C,0xFE,0xFE,0xFE,0xFE,0xFE,0xFE,0xFE,0xFE,0xFE,0xFE,0xFE,0x7C,0x00,      //填充      ==> 85
    14, 0x7C,0xFE,0xFE,0xFE,0x82,0xDE,0xEE,0xF6,0x82,0xFE,0xFE,0xFE,0x7C,0x00,      //N         ==> 100
    14, 0x7C,0xFE,0xB2,0xAA,0xAA,0xDA,0xFE,0x82,0xBA,0xBA,0xC6,0xFE,0x7C,0x00,      //2D        ==> 115
    14, 0x7C,0xFE,0xBA,0xAA,0xAA,0xD6,0xFE,0x82,0xBA,0xBA,0xC6,0xFE,0x7C,0x00,      //3D        ==> 130
    14, 0x7C,0xFE,0xFE,0xFE,0xFE,0xC6,0xBA,0xAA,0xA2,0xFE,0xFE,0xFE,0x7C,0x00,      //G,GPS SPS Mode, fix valid     ==> 145  
    14, 0x7C,0xFE,0x82,0xBA,0xBA,0xC6,0xFE,0xC6,0xBA,0xAA,0xA2,0xFE,0x7C,0x00,      //DG,Differential GPS, SPS Mode, fix valid  ==> 160
    14, 0x7C,0xFE,0x82,0xBA,0xBA,0xC6,0xFE,0x82,0xAE,0xAE,0xD2,0xFE,0x7C,0x00,      //DR,Dead Reckoning Mode,       ==> 175

    // 精度字模 DOP P,H,V, 总计 17+7+20+8+20+8+20 = 100 Pixel  
    17, 0x7E,0x82,0xBA,0xBA,0xC6,0xFE,0xC6,0xBA,0xBA,0xC6,0xFE,0x82,0xAE,0xAE,0xDE,0xFC,0x00,   // DOP 17 Pixel ==> 190
    7,       0x7C,0x82,0xAE,0xAE,0xDE,0xFE,0x00,                                                // P    7 Pixel ==> 208
    // + PDOP 数据 00.0
    8,  0x00,0x7C,0x82,0xEE,0xEE,0x82,0xFE,0x00,                                                // H    8 Pixel ==> 216
    // + HDOP 数据 00.0
    8,  0x00,0x7C,0x86,0xFA,0xF6,0x8E,0xFE,0x00,                                                // V    8 Pixel ==> 225
    // + VDOP 数据 00.0

    // 标签页
    34, 0x3F,0x7F,0x6D,0x55,0x55,0x5B,0x7F,0x61,0x5B,0x5B,0x61,0x7F,0x5F,0x41,0x5F,0x7F,
        0x41,0x7F,0x41,0x6F,0x77,0x41,0x7F,0x41,0x57,0x5F,0x7F,0x63,0x5D,0x5D,0x63,0x7F,
        0x3F,0x00,                                                                          // SatInfo 34 Pixel ==> 234    
    29, 0x3F,0x7F,0x6D,0x55,0x55,0x5B,0x7F,0x41,0x57,0x57,0x6F,0x7F,0x41,0x55,0x55,0x5D,
        0x7F,0x41,0x55,0x55,0x5D,0x7F,0x41,0x5D,0x5D,0x63,0x7F,0x3F,0x00,                   // Speed   29 Pixel ==> 269
    18, 0x3F,0x7F,0x41,0x7D,0x7D,0x7F,0x63,0x5D,0x5D,0x63,0x7F,0x63,0x5D,0x55,0x51,0x7F,
        0x3F,0x00,                                                                          // Log     18 Pixel ==> 299
    
    //
    10, 0x6C,0xD6,0x44,0xC6,0x44,0xC6,0x44,0xC6,0x7C,0x00,      // Log2Flash 16Pixel==> 318

                                                                          



};

void LCD_Icon(u8 ucX, u8 ucY, u16 StartIndex, u8 TextColor, u8 BackColor)
{
    u8 i,j;
    u8 CharBuf;
    u16 CharBufG;
    u8 width=IconDotData[StartIndex];

    for (i=0;i<width;i++) //开始显示图标 IconDotData[StartIndex]: 首字节,宽度
    {
        LCD_CMD(CMD_SET_COLUMN_ADDR);       //设置显示位置
        LCD_DAT(ucX+i);
        LCD_CMD(CMD_SET_PAGE_ADDR);
        LCD_DAT(ucY);
        LCD_CMD(CMD_DATA_WRITE);            //开始填充数据

        CharBuf=IconDotData[StartIndex+i+1];  //图标取模位置
        CharBufG=0x0000;
        for (j=0;j<8;j++)
        {
            CharBufG<<=2;
            if ((CharBuf&0x01)==0x01)
                CharBufG|=TextColor;
            else
                CharBufG|=BackColor;
            CharBuf>>=1;      
        }
        LCD_DAT(CharBufG);
        LCD_DAT(CharBufG>>8);  
    }
}



void LCD_GPS_Tab(u8 TabIndex)
{
    u8 i,j;

    // SAT 34, SPD: 29, LOG: 18
    switch(TabIndex)
    {
    case 1: //SATINFO
        LCD_Icon(0,10,ICON_INDEX_TAB_SAT,GRAY_BLACK,GRAY_WHITE);
        LCD_Icon(34,10,ICON_INDEX_TAB_SPD,GRAY_GB,GRAY_WHITE);
        LCD_Icon(63,10,ICON_INDEX_TAB_LOG,GRAY_GB,GRAY_WHITE);
  
        LCD_CMD(CMD_DATA_IN_DIR_COLUMN);
        // 清空标签右方空白 Page 10,11
        for (i=0;i<2;i++)
        {
            LCD_CMD(CMD_SET_COLUMN_ADDR); //设置显示位置
            LCD_DAT(81);
            LCD_CMD(CMD_SET_PAGE_ADDR);
            LCD_DAT(10+i);
            LCD_CMD(CMD_DATA_WRITE);      //开始填充数据
            for (j=81;j<100;j++)
            {
                LCD_DAT(0x00);    
            }
        }
        //标签下方的边框  Page 12
        LCD_CMD(CMD_SET_COLUMN_ADDR); //设置显示位置
        LCD_DAT(0);
        LCD_CMD(CMD_SET_PAGE_ADDR);
        LCD_DAT(12);
        LCD_CMD(CMD_DATA_WRITE);      //开始填充数据
        for (j=0;j<100;j++)
        {
            LCD_DAT(0x5B);    
        }
        //卫星信息选项卡的 DOP 信息背景, 灰色 Page 13,14 
        // (由于数据全部覆盖, 可以略过)
        /*
        for (i=13;i<15;i++)
        {
            LCD_CMD(CMD_SET_COLUMN_ADDR); //设置显示位置
            LCD_DAT(0);
            LCD_CMD(CMD_SET_PAGE_ADDR);
            LCD_DAT(i);
            LCD_CMD(CMD_DATA_WRITE);      //开始填充数据
            for (j=0;j<100;j++)
            {
                LCD_DAT(0x55);    
            }
        }  */
        // 卫星信号强度背景. Page 15-24
        for (i=13;i<25;i++)
        {
            LCD_CMD(CMD_SET_COLUMN_ADDR);
            LCD_DAT(0);
            LCD_CMD(CMD_SET_PAGE_ADDR);
            LCD_DAT(i);
            LCD_CMD(CMD_DATA_WRITE);
            for(j=0;j<100;j++)
            {
               LCD_DAT(0x55);
            }
        }
        LCD_CMD(CMD_DATA_IN_DIR_PAGE); 
        break;

    case 2: //SPEED
        LCD_Icon(0,10,ICON_INDEX_TAB_SAT,GRAY_GB,GRAY_WHITE);
        LCD_Icon(34,10,ICON_INDEX_TAB_SPD,GRAY_BLACK,GRAY_WHITE);
        LCD_Icon(63,10,ICON_INDEX_TAB_LOG,GRAY_GB,GRAY_WHITE);
  
        LCD_CMD(CMD_DATA_IN_DIR_COLUMN);
        // 清空标签右方空白 Page 10,11
        for (i=10;i<12;i++)
        {
            LCD_CMD(CMD_SET_COLUMN_ADDR); //设置显示位置
            LCD_DAT(81);
            LCD_CMD(CMD_SET_PAGE_ADDR);
            LCD_DAT(i);
            LCD_CMD(CMD_DATA_WRITE);      //开始填充数据
            for (j=81;j<160;j++)
            {
                LCD_DAT(0x00);    
            }
        }
        //标签下方的边框  Page 12
        LCD_CMD(CMD_SET_COLUMN_ADDR); //设置显示位置
        LCD_DAT(0);
        LCD_CMD(CMD_SET_PAGE_ADDR);
        LCD_DAT(12);
        LCD_CMD(CMD_DATA_WRITE);      //开始填充数据
        for (j=0;j<160;j++)
        {
            LCD_DAT(0x5B);    
        }
        // 选项卡背景
        for (i=13;i<25;i++)
        {
            LCD_CMD(CMD_SET_COLUMN_ADDR);
            LCD_DAT(0);
            LCD_CMD(CMD_SET_PAGE_ADDR);
            LCD_DAT(i);
            LCD_CMD(CMD_DATA_WRITE);
            for(j=0;j<160;j++)
            {
               LCD_DAT(0x55);
            }
        }
        LCD_CMD(CMD_DATA_IN_DIR_PAGE); 
        break;

    case 3: //LOG
        LCD_Icon(0,10,ICON_INDEX_TAB_SAT,GRAY_GB,GRAY_WHITE);
        LCD_Icon(34,10,ICON_INDEX_TAB_SPD,GRAY_GB,GRAY_WHITE);
        LCD_Icon(63,10,ICON_INDEX_TAB_LOG,GRAY_BLACK,GRAY_WHITE);
  
        LCD_CMD(CMD_DATA_IN_DIR_COLUMN);
        // 清空标签右方空白 Page 10,11
        for (i=10;i<12;i++)
        {
            LCD_CMD(CMD_SET_COLUMN_ADDR); //设置显示位置
            LCD_DAT(81);
            LCD_CMD(CMD_SET_PAGE_ADDR);
            LCD_DAT(i);
            LCD_CMD(CMD_DATA_WRITE);      //开始填充数据
            for (j=81;j<160;j++)
            {
                LCD_DAT(0x00);    
            }
        }
        //标签下方的边框  Page 12
        LCD_CMD(CMD_SET_COLUMN_ADDR); //设置显示位置
        LCD_DAT(0);
        LCD_CMD(CMD_SET_PAGE_ADDR);
        LCD_DAT(12);
        LCD_CMD(CMD_DATA_WRITE);      //开始填充数据
        for (j=0;j<160;j++)
        {
            LCD_DAT(0x5B);    
        }
        // 选项卡背景
        for (i=13;i<25;i++)
        {
            LCD_CMD(CMD_SET_COLUMN_ADDR);
            LCD_DAT(0);
            LCD_CMD(CMD_SET_PAGE_ADDR);
            LCD_DAT(i);
            LCD_CMD(CMD_DATA_WRITE);
            for(j=0;j<160;j++)
            {
               LCD_DAT(0x55);
            }
        }
        LCD_CMD(CMD_DATA_IN_DIR_PAGE); 
        break;
                
    default:
        break;
    }
}


//航向条,4灰度,450Pixelx20Pixel
//取模方式:由上至下垂直扫描5字节,由左至右450列
//对应显示方式:Page自增方式
const unsigned char Direction[450][5]={
    0x0E,0xFE,0xFF,0xF2,0x47,   0x8E,0x55,0x15,0x00,0x44,   0xCE,0xFF,0xFF,0x00,0x44,   0x0E,0xC0,0xC1,0x01,0x44,   0x0E,0xF0,0xC0,0x01,0x44,   0x0E,0x60,0xF4,0xC0,0x47,   0x0E,0x00,0xB8,0x00,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x33,0xC3,0x47,   0x0E,0x00,0x33,0x03,0x44,   0x0E,0x00,0xFF,0x03,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x33,0x03,0x44,   0x0E,0x00,0x33,0xF3,0x47,
    0x0E,0x00,0xFF,0x03,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0xFF,0x03,0x44,   0x0E,0x00,0x03,0x03,0x44,   0x0E,0x00,0xFF,0xC3,0x47,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x33,0xC3,0x47,   0x0E,0x00,0x33,0x03,0x44,   0x0E,0x00,0xFF,0x03,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x3F,0x00,0x44,   0x0E,0x00,0x30,0xF0,0x47,   0x0E,0x00,0xFF,0x03,0x44,
    0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x3F,0x03,0x44,   0x0E,0x00,0x33,0x03,0x44,   0x0E,0x00,0xF3,0xC3,0x47,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0xA0,0xC0,0x47,   0x0E,0xC0,0xB1,0x00,0x44,   0x0E,0xC1,0x35,0x00,0x44,   0x0E,0xFF,0xFF,0x02,0x44,   0x0E,0x59,0x55,0x00,0x44,   0x8E,0x55,0x15,0xF0,0x47,   0xCE,0xFF,0xFF,0x00,0x44,   0x0E,0xC0,0xC1,0x01,0x44,
    0x0E,0xF0,0xC0,0x01,0x44,   0x0E,0x60,0xF4,0x00,0x44,   0x0E,0x00,0xB8,0xC1,0x47,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0xC0,0x47,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0xFF,0x03,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0xF0,0x47,   0x0E,0x00,0x3F,0x03,0x44,   0x0E,0x00,0x33,0x03,0x44,   0x0E,0x00,0xF3,0x03,0x44,
    0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0xC0,0x47,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0xC0,0x47,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x33,0x03,0x44,   0x0E,0x00,0x33,0x03,0x44,   0x0E,0x00,0xFF,0x03,0x44,   0x0E,0x00,0x00,0xF0,0x47,   0x0E,0x00,0xFF,0x03,0x44,   0x0E,0x00,0x03,0x03,0x44,   0x0E,0x00,0xFF,0x03,0x44,   0x0E,0x00,0x00,0x00,0x44,
    0x0E,0x00,0x00,0xC0,0x47,   0x0E,0x10,0x84,0x03,0x44,   0x0E,0x34,0xEF,0x02,0x44,   0x0E,0xF8,0x6F,0x00,0x44,   0x9E,0x7E,0x0A,0x0B,0x44,   0xDE,0xFF,0xFF,0xCF,0x47,   0x4E,0x9C,0x97,0x06,0x44,   0x0E,0x0D,0x33,0x00,0x44,   0x0E,0x0D,0xF3,0x01,0x44,   0x0E,0x04,0xD0,0x03,0x44,   0x0E,0x00,0xA0,0xF0,0x47,   0x0E,0xC0,0xB1,0x00,0x44,   0x0E,0xC1,0x35,0x00,0x44,   0x0E,0xFF,0xFF,0x02,0x44,   0x0E,0x59,0x55,0x00,0x44,   0xCE,0xFF,0x7F,0xC0,0x47,
    0x8E,0xEB,0xE7,0x00,0x44,   0x0E,0xE0,0xC0,0x01,0x44,   0x0E,0xB0,0xD0,0x01,0x44,   0x0E,0x00,0xFC,0x00,0x44,   0x0E,0x00,0x50,0xC0,0x47,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0xFF,0x03,0x44,   0x0E,0x00,0x33,0x03,0x44,   0x0E,0x00,0xF3,0x03,0x44,   0x0E,0x00,0x00,0xF0,0x47,   0x0E,0x00,0xFF,0x03,0x44,   0x0E,0x00,0x03,0x03,0x44,   0x0E,0x00,0xFF,0x03,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0xC0,0x47,   0x0E,0x00,0x00,0x00,0x44,
    0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0xC0,0x47,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x03,0x00,0x44,   0x0E,0x00,0x03,0x00,0x44,   0x0E,0x00,0xFF,0x03,0x44,   0x0E,0x00,0x00,0xF0,0x47,   0x0E,0x00,0x3F,0x03,0x44,   0x0E,0x00,0x33,0x03,0x44,   0x0E,0x00,0xF3,0x03,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0xC0,0x47,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0x00,0x44,
    0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0xC0,0x47,   0x0E,0x10,0x84,0x03,0x44,   0x0E,0x34,0xEF,0x02,0x44,   0x0E,0xF8,0x6F,0x00,0x44,   0x9E,0x7E,0x0A,0x0B,0x44,   0xDE,0xFF,0xFF,0xFF,0x47,   0x4E,0x9C,0x97,0x06,0x44,   0x0E,0x0D,0x33,0x00,0x44,   0x0E,0x0D,0xF3,0x01,0x44,   0x0E,0x04,0xD0,0x03,0x44,   0x0E,0x00,0x00,0xC0,0x47,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0x00,0x44,
    0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0xC0,0x47,   0x0E,0x00,0xFF,0x03,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0xFF,0x03,0x44,   0x0E,0x00,0x03,0xF3,0x47,   0x0E,0x00,0xFF,0x03,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x3F,0x03,0x44,   0x0E,0x00,0x33,0x03,0x44,   0x0E,0x00,0xF3,0xC3,0x47,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0x00,0x44,
    0x0E,0x00,0xFF,0xC3,0x47,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0xF3,0x03,0x44,   0x0E,0x00,0x33,0x03,0x44,   0x0E,0x00,0x3F,0xF3,0x47,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0xFF,0x03,0x44,   0x0E,0x00,0x03,0x03,0x44,   0x0E,0x00,0xFF,0x03,0x44,   0x0E,0x00,0x00,0xC0,0x47,   0x0E,0x00,0x00,0x01,0x44,   0x0E,0x34,0xDD,0x03,0x44,   0x0E,0xB4,0xFF,0x01,0x44,   0x0E,0xF8,0x0A,0x06,0x44,   0xDE,0xBF,0x5B,0xCF,0x47,
    0xCE,0xEE,0xFF,0x0B,0x44,   0x0E,0x1C,0x13,0x00,0x44,   0x0E,0x0D,0xB3,0x00,0x44,   0x0E,0x0C,0xE1,0x02,0x44,   0x0E,0x40,0x80,0xF2,0x47,   0x0E,0xD0,0xFF,0x03,0x44,   0x0E,0xC0,0x65,0x00,0x44,   0x0E,0xDC,0xBA,0x00,0x44,   0x0E,0xFD,0x7F,0x01,0x44,   0xFE,0xFF,0xFF,0xC3,0x47,   0x9E,0xEB,0x33,0x00,0x44,   0x0E,0x77,0x71,0x02,0x44,   0x0E,0x70,0xA5,0x0F,0x44,   0x0E,0xF0,0xFF,0x07,0x44,   0x0E,0x50,0x00,0xC0,0x47,   0x0E,0x00,0x00,0x00,0x44,
    0x0E,0x00,0xFF,0x03,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x3F,0xF3,0x47,   0x0E,0x00,0x33,0x03,0x44,   0x0E,0x00,0xF3,0x03,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0xFF,0x03,0x44,   0x0E,0x00,0x03,0xC3,0x47,   0x0E,0x00,0xFF,0x03,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0xC0,0x47,   0x0E,0x00,0xFF,0x03,0x44,   0x0E,0x00,0x00,0x00,0x44,
    0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0xFF,0x03,0x44,   0x0E,0x00,0x33,0xF3,0x47,   0x0E,0x00,0xF3,0x03,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x3F,0x03,0x44,   0x0E,0x00,0x33,0x03,0x44,   0x0E,0x00,0xF3,0xC3,0x47,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x90,0x96,0xC1,0x47,   0x0E,0xC0,0xFF,0x02,0x44,   0x0E,0xC8,0x65,0x00,0x44,   0x0E,0xDD,0x7F,0x00,0x44,
    0xAE,0xFF,0xFF,0x03,0x44,   0xFE,0xEF,0x77,0xF0,0x47,   0x0E,0xFB,0x33,0x00,0x44,   0x0E,0x32,0x50,0x07,0x44,   0x0E,0xB0,0xFA,0x0F,0x44,   0x0E,0xF0,0xFF,0x02,0x44,   0x0E,0x00,0x00,0xC0,0x47,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0xFF,0xC3,0x47,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x3F,0x03,0x44,   0x0E,0x00,0x33,0x03,0x44,
    0x0E,0x00,0xFF,0xF3,0x47,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x3F,0x03,0x44,   0x0E,0x00,0x33,0x03,0x44,   0x0E,0x00,0xF3,0x03,0x44,   0x0E,0x00,0x00,0xC0,0x47,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0xF3,0x03,0x44,   0x0E,0x00,0x33,0xC3,0x47,   0x0E,0x00,0x3F,0x03,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0xFF,0x03,0x44,   0x0E,0x00,0x00,0xF0,0x47,
    0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0xFF,0x03,0x44,   0x0E,0x00,0x03,0x03,0x44,   0x0E,0x00,0xFF,0x03,0x44,   0x0E,0x00,0x01,0xC0,0x47,   0x0E,0x40,0x6F,0x00,0x44,   0x0E,0x03,0xFF,0x03,0x44,   0x0E,0x6B,0xFB,0x01,0x44,   0x0E,0xFF,0xCB,0x00,0x44,   0x8E,0xFF,0xCF,0xC0,0x47,   0xCE,0xEF,0xDD,0x00,0x44,   0xCE,0xC2,0xCC,0x0B,0x44,   0x4E,0xC1,0xEA,0x0B,0x44,   0x0E,0xC0,0xBF,0x01,0x44,   0x0E,0x40,0x02,0xF0,0x47,   0x0E,0xD0,0xFF,0x03,0x44,
    0x0E,0xC0,0x65,0x00,0x44,   0x0E,0xDC,0xBA,0x00,0x44,   0x0E,0xFD,0x7F,0x01,0x44,   0xFE,0xFF,0xFF,0xC3,0x47,   0x9E,0xEB,0x33,0x00,0x44,   0x0E,0x77,0x71,0x02,0x44,   0x0E,0x70,0xA5,0x0F,0x44,   0x0E,0xF0,0xFF,0x07,0x44,   0x0E,0x50,0x00,0xC0,0x47,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0xF3,0x03,0x44,   0x0E,0x00,0x33,0x03,0x44,   0x0E,0x00,0x3F,0x03,0x44,   0x0E,0x00,0x00,0xF0,0x47,   0x0E,0x00,0x3F,0x00,0x44,   0x0E,0x00,0x30,0x00,0x44,
    0x0E,0x00,0xFF,0x03,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0xFF,0xC3,0x47,   0x0E,0x00,0x03,0x03,0x44,   0x0E,0x00,0xFF,0x03,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0xC0,0x47,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0xF3,0x03,0x44,   0x0E,0x00,0x33,0x03,0x44,   0x0E,0x00,0x3F,0x03,0x44,   0x0E,0x00,0x00,0xF0,0x47,   0x0E,0x00,0x3F,0x03,0x44,   0x0E,0x00,0x33,0x03,0x44,   0x0E,0x00,0xF3,0x03,0x44,
    0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x3F,0xC3,0x47,   0x0E,0x00,0x33,0x03,0x44,   0x0E,0x00,0xF3,0x03,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x01,0xC0,0x47,   0x0E,0x40,0x6F,0x00,0x44,   0x0E,0x03,0xFF,0x03,0x44,   0x0E,0x6B,0xFB,0x01,0x44,   0x0E,0xFF,0xCB,0x00,0x44,   0x8E,0xC3,0xC6,0xF0,0x47,   0x8E,0xFF,0xCF,0x00,0x44,   0xCE,0xC3,0xDC,0x01,0x44,   0xCE,0xC2,0xC4,0x0F,0x44,   0x0E,0xC0,0xFF,0x07,0x44,
    0x0E,0xC0,0x1B,0xC0,0x47,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0xF3,0x03,0x44,   0x0E,0x00,0x33,0xC3,0x47,   0x0E,0x00,0x3F,0x03,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0xFF,0x03,0x44,   0x0E,0x00,0x33,0x03,0x44,   0x0E,0x00,0xFF,0xF3,0x47,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x3F,0x03,0x44,   0x0E,0x00,0x33,0x03,0x44,   0x0E,0x00,0xF3,0x03,0x44,   0x0E,0x00,0x00,0xC0,0x47,
    0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x33,0x03,0x44,   0x0E,0x00,0x33,0xC3,0x47,   0x0E,0x00,0xFF,0x03,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0xFF,0x03,0x44,   0x0E,0x00,0x03,0x03,0x44,   0x0E,0x00,0xFF,0xF3,0x47,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0xFF,0x03,0x44,   0x0E,0x00,0x03,0x03,0x44,   0x0E,0x00,0xFF,0x03,0x44,   0x0E,0x00,0x00,0xC0,0x47,   0x0E,0x40,0x07,0x00,0x44,
    0x0E,0x02,0xFF,0x03,0x44,   0x0E,0x03,0xF3,0x02,0x44,   0x0E,0xFF,0xEF,0x01,0x44,   0x4E,0xD7,0xC7,0xC0,0x47,   0x8E,0xFF,0xCF,0x00,0x44,   0xCE,0xC3,0xDC,0x01,0x44,   0xCE,0xC2,0xC4,0x0F,0x44,   0x0E,0xC0,0xFF,0x07,0x44,   0x0E,0xC0,0x5B,0xF0,0x47,   0x0E,0x80,0xF1,0x00,0x44,   0x0E,0xC0,0x72,0x00,0x44,   0x0E,0xDB,0xB9,0x01,0x44,   0x0E,0xFE,0xFF,0x02,0x44,   0x8E,0x55,0x15,0xC0,0x47,   0xCE,0xFF,0xFF,0x00,0x44,   0x0E,0xC0,0xC1,0x01,0x44,
    0x0E,0xF0,0xC0,0x01,0x44,   0x0E,0x60,0xF4,0x00,0x44,   0x0E,0x00,0xB8,0xC0,0x47,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x33,0x03,0x44,   0x0E,0x00,0x33,0x03,0x44,   0x0E,0x00,0xFF,0x03,0x44,   0x0E,0x00,0x00,0xF0,0x47,   0x0E,0x00,0x33,0x03,0x44,   0x0E,0x00,0x33,0x03,0x44,   0x0E,0x00,0xFF,0x03,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0xFF,0xC3,0x47,   0x0E,0x00,0x03,0x03,0x44,   0x0E,0x00,0xFF,0x03,0x44,   0x0E,0x00,0x00,0x00,0x44,
    0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0xC0,0x47,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x33,0x03,0x44,   0x0E,0x00,0x33,0x03,0x44,   0x0E,0x00,0xFF,0x03,0x44,   0x0E,0x00,0x00,0xF0,0x47,   0x0E,0x00,0x3F,0x00,0x44,   0x0E,0x00,0x30,0x00,0x44,   0x0E,0x00,0xFF,0x03,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x3F,0xC3,0x47,   0x0E,0x00,0x33,0x03,0x44,   0x0E,0x00,0xF3,0x03,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0x00,0x44,
    0x0E,0x00,0x50,0xC0,0x47,   0x0E,0x80,0xF1,0x00,0x44,   0x0E,0xC0,0x72,0x00,0x44,   0x0E,0xDB,0xB9,0x01,0x44,   0x0E,0xFE,0xFF,0x02,0x44,   0x8E,0x55,0x15,0xF0,0x47,   0xCE,0xFF,0xFF,0x00,0x44,   0x0E,0xC0,0xC1,0x01,0x44,   0x0E,0xF0,0xC0,0x01,0x44,   0x0E,0x60,0xF4,0x00,0x44,   0x0E,0x00,0xB8,0xC0,0x47,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0xC0,0x47,
    0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0xFF,0x03,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0xF0,0x47,   0x0E,0x00,0x3F,0x03,0x44,   0x0E,0x00,0x33,0x03,0x44,   0x0E,0x00,0xF3,0x03,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0xC0,0x47,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0xC0,0x47,   0x0E,0x00,0x00,0x00,0x44,
    0x0E,0x00,0x33,0x03,0x44,   0x0E,0x00,0x33,0x03,0x44,   0x0E,0x00,0xFF,0x03,0x44,   0x0E,0x00,0x00,0xF0,0x47,   0x0E,0x00,0xFF,0x03,0x44,   0x0E,0x00,0x03,0x03,0x44,   0x0E,0x00,0xFF,0x03,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0xC0,0x47,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x00,0x00,0x00,0x44,   0x0E,0x40,0x07,0x00,0x44,   0x0E,0x02,0xFF,0xC3,0x47,   0x0E,0x03,0xF3,0x02,0x44,   0x0E,0xFF,0xEF,0x01,0x44,
    0x4E,0xD7,0xC2,0x00,0x44,   0x8E,0xFF,0xCF,0x00,0x44
};

//航向条中间指示,4灰度,9Pixelx20Pixel
//取模方式:由上至下垂直扫描5字节,由左至右9列
//对应显示方式:Page自增方式
//显示时叠加于航向条之上
const unsigned char DirectionSel[9][5]={
    0x00,0x00,0x00,0x00,0x30,   0x00,0x00,0x00,0x00,0x3C,   0x00,0x00,0x00,0x00,0x3F,
    0x00,0x00,0x00,0xC0,0x3F,   0x00,0x00,0x00,0xF0,0x3F,   0x00,0x00,0x00,0xC0,0x3F,
    0x00,0x00,0x00,0x00,0x3F,   0x00,0x00,0x00,0x00,0x3C,   0x00,0x00,0x00,0x00,0x30,
};

//航向条左右两边的边框效果,4灰度,6Pixelx20Pixel每边3Pixel
//取模方式:由上至下垂直扫描5字节,由左至右6列
//对应显示方式:Page自增方式
const unsigned char DirectionE[6][5]={
    0xAA,0xAA,0xAA,0xAA,0x4A,   0xFE,0xFF,0xFF,0xFF,0x47,   0x0E,0x00,0x00,0x00,0x44,
    0x5E,0x55,0x55,0x55,0x45,   0x02,0x00,0x00,0x00,0x40,   0x55,0x55,0x55,0x55,0x55,
};

/*---------------------------------------------
| LCD_GPS_Course(u16 deg)
| 方向指示
| deg: 当前航向 0-359
---------------------------------------------*/

void LCD_GPS_Course(u8 ucX, u8 ucY, u16 deg)
{
    u8 i,j;

    for (i=0;i<2;i++)       // 方向指示边框 - 左 两个像素
    {
        LCD_CMD(CMD_SET_COLUMN_ADDR); //设置显示位置
        LCD_DAT(ucX+i);
        LCD_CMD(CMD_SET_PAGE_ADDR);
        LCD_DAT(ucY);
        LCD_CMD(CMD_DATA_WRITE);      //开始填充数据
            
        for (j=0;j<5;j++)
        {
            LCD_DAT(DirectionE[i][j]);
        }   
    }
    for (i=0;i<41;i++)      // 方向指示左半部分
    {
        LCD_CMD(CMD_SET_COLUMN_ADDR); //设置显示位置
        LCD_DAT(ucX+i+2);
        LCD_CMD(CMD_SET_PAGE_ADDR);
        LCD_DAT(ucY);
        LCD_CMD(CMD_DATA_WRITE);      //开始填充数据
            
        for (j=0;j<5;j++)
        {
            LCD_DAT(Direction[deg+i][j]);
        }
    }
    for (i=41;i<50;i++)     // 方向指示中间部分 需要与箭头相与
    { 
        LCD_CMD(CMD_SET_COLUMN_ADDR); //设置显示位置
        LCD_DAT(ucX+i+2);
        LCD_CMD(CMD_SET_PAGE_ADDR);
        LCD_DAT(ucY);
        LCD_CMD(CMD_DATA_WRITE);      //开始填充数据
        for (j=0;j<5;j++)
        {
            LCD_DAT(Direction[deg+i][j]|DirectionSel[i-41][j]);
        }
    }

    for (i=50;i<90;i++)     // 方向指示右半部分
    {
        LCD_CMD(CMD_SET_COLUMN_ADDR); //设置显示位置
        LCD_DAT(ucX+i+2);
        LCD_CMD(CMD_SET_PAGE_ADDR);
        LCD_DAT(ucY);
        LCD_CMD(CMD_DATA_WRITE);      //开始填充数据
            
        for (j=0;j<5;j++)
        {
            LCD_DAT(Direction[deg+i][j]);
        }
    }

    for (i=3;i<5;i++)       // 右边框
    {
        LCD_CMD(CMD_SET_COLUMN_ADDR); //设置显示位置
        LCD_DAT(ucX+92+i-3);
        LCD_CMD(CMD_SET_PAGE_ADDR);
        LCD_DAT(ucY);
        LCD_CMD(CMD_DATA_WRITE);      //开始填充数据
            
        for (j=0;j<5;j++)
        {
            LCD_DAT(DirectionE[i][j]);
        }   
    }
}


const unsigned char LCD_RectStyle[][15]={
    //左上角   ,TOP ,右上角   ,LEFT     ,填充,RIGHT    ,左下角   ,Button,右下角
    //0   1    2    3    4    5    6    7    8    9    10   11   12   13   14
    {0xAA,0x02,0x52,0xA2,0xFE,0xAA,0x00,0x55,0xAA,0xFF,0xAA,0xC0,0xE5,0xEA,0xFF},
    {0xAA,0xFE,0x5E,0xAE,0x02,0xAA,0xFF,0x55,0xAA,0x00,0xAA,0x3F,0x25,0x2A,0x00},
};

void LCD_GUI_Rect(u8 ucXS, u8 ucYS, u8 ucXE, u8 ucYE, u8 uRectStyle)
{
    u8 i,j;
    u8 FillXS= ucXS+2;
    u8 FillXE= ucXE-2;
    //------------------------
    //参数有效性判断


    LCD_CMD(CMD_DATA_IN_DIR_COLUMN);
    //------------------------
    //顶部
    LCD_CMD(CMD_SET_COLUMN_ADDR); //设置显示位置
    LCD_DAT(ucXS);
    LCD_CMD(CMD_SET_PAGE_ADDR);
    LCD_DAT(ucYS);
    LCD_CMD(CMD_DATA_WRITE);      //开始填充数据
    LCD_DAT(LCD_RectStyle[uRectStyle][0]); 
    LCD_DAT(LCD_RectStyle[uRectStyle][1]);
    for (i=FillXS;i<FillXE;i++)
    {
        LCD_DAT(LCD_RectStyle[uRectStyle][2]);
    }   
    LCD_DAT(LCD_RectStyle[uRectStyle][3]); 
    LCD_DAT(LCD_RectStyle[uRectStyle][4]);
    //------------------------
    //中部
    for (i=ucYS+1;i<ucYE;i++)
    {
        LCD_CMD(CMD_SET_COLUMN_ADDR); //设置显示位置
        LCD_DAT(ucXS);
        LCD_CMD(CMD_SET_PAGE_ADDR);
        LCD_DAT(i);
        LCD_CMD(CMD_DATA_WRITE);      //开始填充数据
        LCD_DAT(LCD_RectStyle[uRectStyle][5]); 
        LCD_DAT(LCD_RectStyle[uRectStyle][6]);
        for (j=FillXS;j<FillXE;j++)
        {
            LCD_DAT(LCD_RectStyle[uRectStyle][7]);
        }   
        LCD_DAT(LCD_RectStyle[uRectStyle][8]); 
        LCD_DAT(LCD_RectStyle[uRectStyle][9]);
    }
    //------------------------
    //底部         
    LCD_CMD(CMD_SET_COLUMN_ADDR); //设置显示位置
    LCD_DAT(ucXS);
    LCD_CMD(CMD_SET_PAGE_ADDR);
    LCD_DAT(ucYE);
    LCD_CMD(CMD_DATA_WRITE);      //开始填充数据
    LCD_DAT(LCD_RectStyle[uRectStyle][10]); 
    LCD_DAT(LCD_RectStyle[uRectStyle][11]);
    for (i=FillXS;i<FillXE;i++)
    {
        LCD_DAT(LCD_RectStyle[uRectStyle][12]);
    }   
    LCD_DAT(LCD_RectStyle[uRectStyle][13]); 
    LCD_DAT(LCD_RectStyle[uRectStyle][14]);

    LCD_CMD(CMD_DATA_IN_DIR_PAGE); 
}




void LCD_GUI_Button(u8 ucX, u8 ucY, char * btStr, u8 btStyle)
{
    u8 CharLen=0;
    char * tStr=btStr;

    //计算字符串长度
    while(*tStr)
    {
        CharLen++;
        tStr++;
    }

    //------------------------
    //参数有效性判断

    //------------------------
    LCD_GUI_Rect(ucX,ucY,ucX+CharLen*6+6,ucY+4,btStyle&0x0F);
    
    LCD_SetGray(GRAY_BLACK,GRAY_GW);
    LCD_PutStr12(ucX+3,ucY+1,btStr);
}



const u32 ProgressBar[]={0x007FFFFF,0x007AAAAB,0x00700003};

void LCD_GUI_ProgressBar(u8 ucX, u8 ucY, u8 ucLen, u8 ucPerc, u8 ucStyle)
{
    u8 i,j,k;
    u8 uPercStartX;
    u8 uProcessToX= ucLen*ucPerc/100;
    u8 uGrayB,uGrayF;
    u8 uCharBuf;
    u32 uCharBufG;
    u8 PercStr[]="100%";

    if (ucPerc<10)
    {
        PercStr[0]=' ';
        PercStr[1]=' ';
        PercStr[2]=ucPerc+'0';
    }
    else if (ucPerc<100)
    {
        PercStr[0]=' ';
        PercStr[1]=ucPerc/10+'0';
        PercStr[2]=ucPerc%10+'0';
    }
    else
    {
        PercStr[0]=ucPerc/100+'0';
        PercStr[1]=(ucPerc/10)%10+'0';
        PercStr[2]=ucPerc%10+'0';
    }
    //------------------------
    //参数有效性判断

    if (ucLen>21)   //大于20宽度才能在内部显示百分比
    {
        uPercStartX= ucLen/2-9;


        LCD_CMD(CMD_SET_COLUMN_ADDR); //设置显示位置
        LCD_DAT(ucX);
        LCD_CMD(CMD_SET_PAGE_ADDR);
        LCD_DAT(ucY);
        LCD_CMD(CMD_DATA_WRITE);      //开始填充数据
        LCD_DAT(ProgressBar[0]);
        LCD_DAT(ProgressBar[0]>>8);
        LCD_DAT(ProgressBar[0]>>16); 
    
        for (i=1;i<uPercStartX;i++)     //显示文字之前
        {
            LCD_CMD(CMD_SET_COLUMN_ADDR); //设置显示位置
            LCD_DAT(ucX+i);
            LCD_CMD(CMD_SET_PAGE_ADDR);
            LCD_DAT(ucY);
            LCD_CMD(CMD_DATA_WRITE);      //开始填充数据
            if (i>uProcessToX)  //超过进度位置
            {
                LCD_DAT(ProgressBar[2]);
                LCD_DAT(ProgressBar[2]>>8);
                LCD_DAT(ProgressBar[2]>>16);
            }
            else
            {
                LCD_DAT(ProgressBar[1]);
                LCD_DAT(ProgressBar[1]>>8);
                LCD_DAT(ProgressBar[1]>>16);
            } 
        }
        for (i=0;i<4;i++)       //连百分号共四位
        {
            for (j=0;j<5;j++)
            {
                if (uPercStartX+i*5+j>uProcessToX)  //超过进度位置, 百分比背景白色
                {
                    uGrayB=0x00;
                    uGrayF=0x03;
                }
                else                         
                {
                    uGrayB=0x02;
                    uGrayF=0x00;
                }
                LCD_CMD(CMD_SET_COLUMN_ADDR); //设置显示位置
                LCD_DAT(ucX+uPercStartX+i*5+j);
                LCD_CMD(CMD_SET_PAGE_ADDR);
                LCD_DAT(ucY);
                LCD_CMD(CMD_DATA_WRITE);      //开始填充数据
                uCharBuf=ASCII_4x7[PercStr[i]][j];
                uCharBufG=0x00000000;
                for (k=0;k<8;k++)
                {
                    uCharBufG<<=2;
                    if ((uCharBuf&0x01)==0x01)
                    {
                        if (ucStyle)        //样式选择, 0x01: 百分比数字反白
                        {
                            uCharBufG|=uGrayF;
                        }
                        else 
                        {
                            uCharBufG|=0x03;
                        }
                    }
                    else
                    {
                        uCharBufG|=uGrayB;
                    }
                    uCharBuf>>=1;      
                }               
                uCharBufG<<=2;
                uCharBufG|=uGrayB;
                uCharBufG<<=2;

                uCharBufG |= ProgressBar[2];    //加上边框
                LCD_DAT(uCharBufG);
                LCD_DAT(uCharBufG>>8);
                LCD_DAT(uCharBufG>>16); 
            }
        }

        for (i=uPercStartX+20;i<ucLen;i++)     //显示文字之前
        {
            LCD_CMD(CMD_SET_COLUMN_ADDR); //设置显示位置
            LCD_DAT(ucX+i);
            LCD_CMD(CMD_SET_PAGE_ADDR);
            LCD_DAT(ucY);
            LCD_CMD(CMD_DATA_WRITE);      //开始填充数据
            if (i>uProcessToX)  //超过进度位置
            {
                LCD_DAT(ProgressBar[2]);
                LCD_DAT(ProgressBar[2]>>8);
                LCD_DAT(ProgressBar[2]>>16);
            }
            else
            {
                LCD_DAT(ProgressBar[1]);
                LCD_DAT(ProgressBar[1]>>8);
                LCD_DAT(ProgressBar[1]>>16);
            } 
        }
        LCD_CMD(CMD_SET_COLUMN_ADDR); //设置显示位置
        LCD_DAT(ucX+ucLen);
        LCD_CMD(CMD_SET_PAGE_ADDR);
        LCD_DAT(ucY);
        LCD_CMD(CMD_DATA_WRITE);      //开始填充数据
        LCD_DAT(ProgressBar[0]);
        LCD_DAT(ProgressBar[0]>>8);
        LCD_DAT(ProgressBar[0]>>16);
    }      
}


const unsigned char ScrollBar[][10] = {
    0xAA,0x02,0x52,0x52,0x52,0xD2,0x52,0x52,0xA2,0xFE,  // 垂直滚动条 顶部 向上箭头 Page1
    0xAA,0xC0,0xE5,0xED,0xEF,0xEF,0xEF,0xED,0xEA,0xFF,  //                          Page2
    0xAA,0x02,0x52,0xD2,0xD2,0xD2,0xD2,0xD2,0xA2,0xFE,  // 垂直滚动条 底部 向下箭头 Page1
    0xAA,0xC0,0xE5,0xE5,0xE7,0xEF,0xE7,0xE5,0xEA,0xFF,  //                          Page2
    0XAA,0X02,0X52,0X52,0X52,0X52,0X52,0X52,0XA2,0XFE,
    0X0A,0X0C,0X0E,0X0E,0X0E,0X0E,0X0E,0X0E,0X0E,0X0F,
};

/*---------------------------------------------
| LCD_GUI_ScrollBarV
| 显示垂直滚动条 宽度 10 Pixel
| ucX           :左上角
| ucPageTop     :顶部
| ucPageBottom  :底部 由于按钮最小 6 Pixel, 则中间至少要剩余 2 Pgae
| ucPos         :滚动按钮位置 (0-99)
| ucRange       :滚动按钮范围 (1-99)
---------------------------------------------*/
void LCD_GUI_ScrollBarV(u8 ucX, u8 ucPageTop, u8 ucPageBottom, u8 ucRange, u8 ucPos)
{
    u8 i,j;

    // 显示上下两个带箭头按钮
    LCD_CMD(CMD_DATA_IN_DIR_COLUMN);
    for (i=0;i<2;i++)   // 顶部
    {
        LCD_CMD(CMD_SET_COLUMN_ADDR);
        LCD_DAT(ucX);
        LCD_CMD(CMD_SET_PAGE_ADDR);
        LCD_DAT(ucPageTop+i);
        LCD_CMD(CMD_DATA_WRITE);
         
        for (j=0;j<10;j++)
        {
            LCD_DAT(ScrollBar[i][j]);
        }
    }
    for (i=0;i<2;i++)   //底部
    {
        LCD_CMD(CMD_SET_COLUMN_ADDR);
        LCD_DAT(ucX);
        LCD_CMD(CMD_SET_PAGE_ADDR);
        LCD_DAT(ucPageBottom+i-1);
        LCD_CMD(CMD_DATA_WRITE);
         
        for (j=0;j<10;j++)
        {
            LCD_DAT(ScrollBar[i+2][j]);
        }
    }
    for (i=ucPageTop+2;i<ucPageBottom-1;i++)   // 中间灰色
    {
        LCD_CMD(CMD_SET_COLUMN_ADDR);
        LCD_DAT(ucX);
        LCD_CMD(CMD_SET_PAGE_ADDR);
        LCD_DAT(i);
        LCD_CMD(CMD_DATA_WRITE);
         
        for (j=0;j<10;j++)
        {
            LCD_DAT(0xAA);
        }
    }
    for (i=0;i<2;i++)   //底部
    {
        LCD_CMD(CMD_SET_COLUMN_ADDR);
        LCD_DAT(ucX);
        LCD_CMD(CMD_SET_PAGE_ADDR);
        LCD_DAT(ucPageTop+i+3);
        LCD_CMD(CMD_DATA_WRITE);
         
        for (j=0;j<10;j++)
        {
            LCD_DAT(ScrollBar[i+4][j]);
        }
    }
    LCD_CMD(CMD_DATA_IN_DIR_PAGE);



}

void LCD_GUI_HR(u8 ucXS, u8 ucXE, u8 ucY)
{
    u8 i;

    LCD_CMD(CMD_DATA_IN_DIR_COLUMN);
    //------------------------
    //顶部
    LCD_CMD(CMD_SET_COLUMN_ADDR);
    LCD_DAT(ucXS);
    LCD_CMD(CMD_SET_PAGE_ADDR);
    LCD_DAT(ucY);
    LCD_CMD(CMD_DATA_WRITE);

    for (i=ucXS;i<ucXE;i++)
    {
        LCD_DAT(0x49); 
    }

    LCD_CMD(CMD_DATA_IN_DIR_PAGE);

}

const unsigned char FlashBlock[][4]={
            // 0x55,0x01,0x01,0x01,  背景 GW, 白色 Block 
            // 0x55,0xFD,0xCD,0x31,  路径起始
            // 0x75,0x31,0x31,0x31,  数据 全部
            // 0x75,0x31,0x0D,0x31,  数据 部分
            // 0xFD,0x01,0xFD,0xCD,  路径结束和开始
            // 0x75,0x31,0xCD,0xFD,  路径结束
            // 0xAF,0x8B,0xE2,0xFA,  选中

            // *pStr : b 0000 0000
            //                   1:Track = 1
            //                  2:Used = 1
            //                 3:Full = 1

    0x55,0x01,0x01,0x01,   // 0000 背景 GW, 白色 Block 
    0x55,0xFD,0xCD,0x31,   // 0001 路径起始
    0x75,0x31,0xCD,0xFD,   // 0010 路径结束
    0x55,0xFD,0xCD,0x31,   // 0011 路径起始

    0x75,0x31,0x31,0x31,   // 0100 数据 全部
    0x55,0xFD,0xCD,0x31,   // 0101 路径起始
    0x75,0x31,0x31,0x31,   // 0110 数据全部
    0x55,0xFD,0xCD,0x31,   // 0111 路径起始

    0xAF,0x8B,0xE2,0xFA,   // 选中
/*
    0x55,0xA9,0xA9,0xA9,    //背景 GW, GB色 Block
    0x55,0xFD,0xFD,0xFD,    //背景 GW, 黑色 Block

    0x55,0x01,0x11,0x01,    //背景 GW, 白色方框
    0x55,0xA9,0x99,0xA9,    //背景 GW, GB色方框
    0x55,0xFD,0xDD,0xFD,    //背景 GW, 黑色方框

    0x55,0x11,0x45,0x11,    //背景 GW, 白色X
    0x55,0x99,0x65,0x99,    //背景 GW, GB色X
    0x55,0xDD,0x75,0xDD,    //背景 GW, 黑色X
*/
};

void LCD_GUI_FlashMap(u8 * ucFlashMap, u16 PageID)  //398 Byte Flash 使用情况缓存
{
    u8 i,j,k;
    u16 count=0;

    LCD_GUI_Rect(0,12,160,24,0);

    LCD_CMD(CMD_DATA_IN_DIR_COLUMN);
    for (i=13;i<24;i++)
    {
        //------------------------
        //顶部
        LCD_CMD(CMD_SET_COLUMN_ADDR);
        LCD_DAT(4);
        LCD_CMD(CMD_SET_PAGE_ADDR);
        LCD_DAT(i);
        LCD_CMD(CMD_DATA_WRITE);

        for (j=0;j<38;j++)
        {
            if (PageID==count)
            {
                for (k=0;k<4;k++)
                {
                    LCD_DAT(FlashBlock[8][k]);
                }           
            }
            else
            {
                for (k=0;k<4;k++)
                {
                    LCD_DAT(FlashBlock[(*ucFlashMap)&0x07][k]);
                }
            }
            count++;
            if (count>397)
            {
                LCD_CMD(CMD_DATA_IN_DIR_PAGE);
                return;
            }
            ucFlashMap++;         
        }
    }
    LCD_CMD(CMD_DATA_IN_DIR_PAGE);  
}


void LCD_GUI_BG1(void)                  //背景1 灰白交错 2 pixel x 2 pixel 格子
{
    u16 i;

    LCD_CMD(CMD_DATA_IN_DIR_COLUMN);
    LCD_CMD(CMD_SET_COLUMN_ADDR);
    LCD_DAT(0);
    LCD_CMD(CMD_SET_PAGE_ADDR);
    LCD_DAT(0);
    LCD_CMD(CMD_DATA_WRITE);

    for(i=0;i<1000;i++)
    {
       LCD_DAT(0x05);LCD_DAT(0x05);
       LCD_DAT(0x50);LCD_DAT(0x50);
    }

    LCD_CMD(CMD_DATA_IN_DIR_PAGE);
}
